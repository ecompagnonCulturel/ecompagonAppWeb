<ion-header>
    <ion-toolbar color="secondary">
        <ion-buttons slot="start">
            <ion-back-button defaultHref="login"></ion-back-button>
        </ion-buttons>
        <ion-title>
            Réinitialisation
        </ion-title>
    </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
    <mat-card>
    <ion-img src="../../../assets/images/create.png"></ion-img>
    <div>
        <form (ngSubmit)="initPassword()" [formGroup]="init">
            <div class="input-group">
                <div *ngIf="exist==true" class="message" class="message">
                    <ion-label mat-line class="exit">Vous avez déjà un compte.</ion-label>
                    <ion-label mat-line class="exit"><br>Connectez vous plutôt</ion-label>
                </div>
                <div *ngIf="message!=null" class="message" class="message">
                    {{message}}
                </div>
                <ion-item>
                    <ion-input type="text" placeholder="prenom.nom@uqtr.ca" formControlName="mailUsers"  ></ion-input>
                </ion-item>
                <div *ngIf="(mailUsers.dirty || mailUsers.touched) && mailUsers.errors" class="errors">
                    <span *ngIf="mailUsers.errors?.required||mailUsers.errors?.invalidMail||mailUsers.errors?.email">Courriel de l'uqtr obligatoire</span>
                    <!--<span *ngIf="mailUsers.errors?.email">Courriel non valide</span>-->
                  <!--  <span *ngIf="mailUsers.errors?.invalidMail||mailUsers.errors?.email">Couriel de l'uqtr</span>
-->                </div>
                <ion-item>
                    <ion-input [type]="passwordType" placeholder="mot de passe"
                               formControlName="passwordAUsers"></ion-input>
                    <ion-icon name="eye" [color]="passswordIsShown===true?'secondary':'red'"
                              [style]="passswordIsShown===true?'opacity:100%':'opacity:50%'" item-end
                              (click)="PasswordVisible()"></ion-icon>
                </ion-item>
                <div *ngIf="(passwordAUsers.dirty || passwordAUsers.touched) && passwordAUsers.errors" class="errors">
                    <span *ngIf="passwordAUsers.errors?.required">mot de passe obligatoire</span>
                    <span *ngIf="passwordAUsers.errors?.minlength">6 caractères au moins pour le mot de passe</span>
                </div>
                <ion-item>
                    <ion-input [type]="cpasswordType" placeholder="Confirmer mot de passe"
                               formControlName="confirmpasswordAUsers"></ion-input>
                    <ion-icon name="eye" [color]="cpassswordIsShown===true?'secondary':'red'"
                              [style]="cpassswordIsShown===true?'opacity:100%':'opacity:50%'" item-end
                              (click)="cPasswordVisible()"></ion-icon>
                </ion-item>
                <div *ngIf="(confirmpasswordAUsers.dirty || confirmpasswordAUsers.touched) && confirmpasswordAUsers.errors"
                     class="errors">
                    <div *ngIf="init.errors?.invalidPassword||confirmpasswordAUsers.errors?.minlength||confirmpasswordAUsers.errors"
                         class="errors">
                        <span>Les deux mots de passe doivent  correspondre</span>

                    </div>
                </div>



                <div>
                    <div class="left">
                        <ion-button size="small" color="secondary" type="button" routerLink="">
              <span class="material-icons">
                update_disabled
                </span>
                            Annuler
                        </ion-button>
                    </div>
                    <div class="right">
                        <ion-button type="submit" [disabled]="!init.valid" size="small" color="primary">
          <span class="material-icons">
            save
            </span>
                            Valider
                        </ion-button>

                    </div>
                </div>
            </div>
        </form>
    </div>
    </mat-card>
</ion-content>

